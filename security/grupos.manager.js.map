{"version":3,"sources":["kernel/security/grupos.manager.ts"],"names":[],"mappings":"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","file":"grupos.manager.js","sourcesContent":["//Frameworks\r\nimport { Component, ViewChild, forwardRef, Input } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\n//Azteca Kernel\r\nimport { Context, BaseComponent, CatalogItem, CatalogService } from '../index';\r\nimport { CatalogOptions } from '../custom/index';\r\nimport { CatalogManager } from '../editors/index';\r\nimport { SearchRequest } from '../search/index';\r\n//Locales\r\nimport { GrupoInfo, GrupoService, GrupoItem } from './grupo';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'security-grupos-manager',\r\n    templateUrl: './grupos.manager.html',\r\n    providers: [\r\n        {\r\n            provide: BaseComponent, useExisting: forwardRef(() => GruposManager)\r\n        },\r\n        {\r\n            provide: CatalogService, useExisting: GrupoService\r\n        }\r\n    ]\r\n})\r\nexport class GruposManager extends CatalogManager {\r\n    grupos: GrupoInfo[];\r\n\r\n    constructor(private router: Router, private route: ActivatedRoute, protected context: Context, private grupoService: GrupoService) {\r\n        super(context);\r\n    }\r\n\r\n    onConfigureCatalog(options: CatalogOptions) {\r\n        this.manager.serverSide = options.busquedasServidor;\r\n        this.manager.pageSize = options.tamanioPagina;\r\n        this.refreshList();\r\n    }\r\n\r\n    doSearch(request: SearchRequest) {\r\n        this.context.app.showSpinner();\r\n\r\n        this.grupoService.search(this.context.app.defaultSite.identity, request)\r\n            .then(response => {\r\n                this.context.app.hideSpinner();\r\n                //\r\n                this.grupos = response.rows;\r\n                this.totalRows = response.totalRows;\r\n                this.pageIndex = request.pageIndex;\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onAddingItem() {\r\n        this.router.navigate([0], { relativeTo: this.route });\r\n    }\r\n\r\n    onViewingItem(item: CatalogItem) {\r\n        this.router.navigate([item.id, { readonly: true }], { relativeTo: this.route });\r\n    }\r\n\r\n    onEditingItem(item: CatalogItem) {\r\n        this.router.navigate([item.id], { relativeTo: this.route });\r\n    }\r\n\r\n    onDeletingItem(item: CatalogItem) {\r\n        this.grupoService.delete(item.id)\r\n            .then(success => {\r\n                this.refreshList();\r\n                this.showAlert('El registro ha sido eliminado con éxito.', 'success');\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onCloningItem(item: CatalogItem) {\r\n        this.router.navigate([0, { cloneId: item.id }], { relativeTo: this.route });\r\n    }\r\n\r\n    onChangingItemState(item: CatalogItem) {\r\n        this.grupoService.changeStatus(item.id, !item.activo)\r\n            .then(success => {\r\n                this.refreshList();\r\n                this.showAlert('El estatus del registro ha sido actualizado con éxito.', 'success');\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n}\r\n"]}
{"version":3,"sources":["kernel/security/empresas.editor.ts"],"names":[],"mappings":"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","file":"empresas.editor.js","sourcesContent":["//Frameworks\r\nimport { Component, OnInit, ViewChild, Input, forwardRef } from '@angular/core';\r\nimport { Router, ActivatedRoute, Params } from '@angular/router';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { Location } from '@angular/common';\r\n//\r\nimport { Control } from 'wijmo/wijmo';\r\n//Azteca Kernel\r\nimport { Context, BaseComponent, CatalogService} from '../index';\r\nimport { CatalogOptions } from '../custom/index';\r\nimport { AztecaValiators } from '../controls/index';\r\nimport { CatalogEditor, EditorEventArgs } from '../editors/index';\r\nimport { SearchRequest, SearchCondition } from '../search/index';\r\nimport { FileInfo } from '../general/index';\r\n//Locales\r\nimport { EmpresaInfo, EmpresaService, SucursalItem, SucursalService, SucursalesManager } from './index';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'azteca-empresas-editor',\r\n    templateUrl: './empresas.editor.html',\r\n    providers: [\r\n        {\r\n            provide: BaseComponent, useExisting: forwardRef(() => EmpresasEditor)\r\n        },\r\n        {\r\n            provide: CatalogService, useExisting: EmpresaService\r\n        }\r\n    ]\r\n})\r\nexport class EmpresasEditor extends CatalogEditor {\r\n    empresa: EmpresaInfo = new EmpresaInfo();\r\n    sucursales: any[] = [];\r\n    @ViewChild(SucursalesManager) siteManager: SucursalesManager;\r\n    //        \r\n    constructor(private router: Router, private route: ActivatedRoute, formBuilder: FormBuilder,\r\n        protected context: Context, private empresaService: EmpresaService, private sucursalService: SucursalService, private location: Location) {\r\n\r\n        super(context);\r\n        this.catalogForm = formBuilder.group({\r\n            'codigo': ['', Validators.required],\r\n            'nombre': ['', Validators.required],\r\n            'calle': [''],\r\n            'numExt': [''],\r\n            'numInt': [''],\r\n            'colonia': [''],\r\n            'logo': [null, AztecaValiators.validFile],            \r\n            'poblacion': [0, AztecaValiators.selected]\r\n        });\r\n    }\r\n\r\n    onConfigureCatalog(options: CatalogOptions) {\r\n        this.autogeneratedCode = options.codigoAutogenerado;\r\n    }\r\n\r\n    onCreatingItem() {\r\n        \r\n    }\r\n\r\n    onViewingItem(id: number) {\r\n        this.context.app.showSpinner();\r\n\r\n        this.empresaService.getDetailByID(id)\r\n            .then(info => {\r\n                this.context.app.hideSpinner();\r\n                this.empresa = info;                \r\n                this.setReadonlyMode();\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onCloningItem(id: number) {\r\n        this.context.app.showSpinner();\r\n        //\r\n        this.empresaService.clone(id)\r\n            .then(info => {\r\n                this.context.app.hideSpinner();\r\n                this.empresa = info;\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onLoadingItem(id: number) {\r\n        this.context.app.showSpinner();\r\n\r\n        this.empresaService.getDetailByID(id)\r\n            .then(info => {\r\n                this.context.app.hideSpinner();\r\n                this.empresa = info;                \r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onSavingItem(args: EditorEventArgs) {\r\n        this.context.app.showSpinner();\r\n        this.empresaService.update(this.empresa)\r\n            .then(info => {\r\n                this.context.app.hideSpinner();\r\n                this.empresa = info;                \r\n                if (args.closeEditor)\r\n                    this.location.back();\r\n                else\r\n                    this.showAlert('La información ha sido actualizada con éxito', 'success');                \r\n            })\r\n            .catch(error => this.handleError(error));        \r\n    }\r\n\r\n    //Manejo de sucursales\r\n    selectSucursalesTab() {\r\n        Control.invalidateAll();\r\n    }\r\n}"]}
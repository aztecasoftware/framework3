{"version":3,"sources":["../../Scripts/app/kernel/security/sucursales.manager.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,sCAA6D;AAC7D,0CAAyD;AAGzD,sCAAqC;AAErC,8DAA4D;AAC5D,wCAA0D;AAE1D,uCAA2D;AAC3D,oDAAkD;AAelD,IAAa,iBAAiB;IAAS,qCAAc;IAIjD,2BAAoB,MAAc,EAAU,KAAqB,EAAY,OAAgB,EAAU,eAAgC;QAAvI,YACI,kBAAM,OAAO,CAAC,SACjB;QAFmB,YAAM,GAAN,MAAM,CAAQ;QAAU,WAAK,GAAL,KAAK,CAAgB;QAAY,aAAO,GAAP,OAAO,CAAS;QAAU,qBAAe,GAAf,eAAe,CAAiB;;IAEvI,CAAC;IAED,8CAAkB,GAAlB,UAAmB,OAAuB;QACtC,IAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,OAAO,CAAC,aAAa,CAAC;QAC9C,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC,iBAAiB,CAAC;QACpD,IAAI,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAED,oCAAQ,GAAR,UAAS,OAAsB;QAA/B,iBAcC;QAbG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;QAC/B,qCAAqC;QACrC,IAAI,gBAAgB,GAAoB,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,EAAE,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC;QAClI,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAE1C,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,QAAQ,EAAE,OAAO,CAAC;aACtE,IAAI,CAAC,UAAA,QAAQ;YACV,KAAI,CAAC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;YAC/B,EAAE;YACF,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC;YAChC,KAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAC;QACvC,CAAC,CAAC;aACD,KAAK,CAAC,UAAA,KAAK,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAvB,CAAuB,CAAC,CAAC;IACjD,CAAC;IAED,wCAAY,GAAZ;QACI,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;IAC5E,CAAC;IAED,yCAAa,GAAb,UAAc,IAAiB;QAC3B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,4BAA4B,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;IAClF,CAAC;IAEL,wBAAC;AAAD,CAtCA,AAsCC,CAtCsC,gCAAc,GAsCpD;AArCY;IAAR,YAAK,EAAE;;oDAAmB;AADlB,iBAAiB;IAb7B,gBAAS,CAAC;QACP,QAAQ,EAAE,MAAM,CAAC,EAAE;QACnB,QAAQ,EAAE,2BAA2B;QACrC,WAAW,EAAE,2BAA2B;QACxC,SAAS,EAAE;YACP;gBACI,OAAO,EAAE,8BAAa,EAAE,WAAW,EAAE,iBAAU,CAAC,cAAM,OAAA,mBAAiB,EAAjB,CAAiB,CAAC;aAC3E;YACD;gBACI,OAAO,EAAE,yBAAc,EAAE,WAAW,EAAE,0BAAe;aACxD;SACJ;KACJ,CAAC;qCAK8B,eAAM,EAAiB,uBAAc,EAAqB,iBAAO,EAA2B,0BAAe;GAJ9H,iBAAiB,CAsC7B;AAtCY,8CAAiB","file":"sucursales.manager.js","sourcesContent":["import { Component, Input, forwardRef } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\n\r\nimport { Context } from '../context';\r\nimport { CatalogOptions } from '../custom/custom-catalog';\r\nimport { CatalogManager } from '../editors/catalog-manager';\r\nimport { CatalogItem, CatalogService } from '../entities';\r\nimport { SearchRequest, SearchCondition } from '../search/search-request';\r\nimport { SucursalInfo, SucursalService } from './sucursal';\r\nimport { BaseComponent } from '../base-component';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'azteca-sucursales-manager',\r\n    templateUrl: './sucursales.manager.html',\r\n    providers: [\r\n        {\r\n            provide: BaseComponent, useExisting: forwardRef(() => SucursalesManager)\r\n        },\r\n        {\r\n            provide: CatalogService, useExisting: SucursalService\r\n        }\r\n    ]\r\n})\r\nexport class SucursalesManager extends CatalogManager {    \r\n    @Input() idEmpresa: number;\r\n    sucursales: any[];\r\n\r\n    constructor(private router: Router, private route: ActivatedRoute, protected context: Context, private sucursalService: SucursalService) {\r\n        super(context);\r\n    }\r\n\r\n    onConfigureCatalog(options: CatalogOptions) {\r\n        this.manager.pageSize = options.tamanioPagina;\r\n        this.manager.serverSide = options.busquedasServidor;\r\n        this.refreshList();\r\n    }\r\n\r\n    doSearch(request: SearchRequest) {\r\n        this.context.app.showSpinner();\r\n        //Agregar condiciÃ³n de empresa actual\r\n        let condicionEmpresa: SearchCondition = { field: \"idEmpresa\", operator: \"=\", valueType: \"int\", value: this.idEmpresa.toString() };\r\n        request.conditions.push(condicionEmpresa);\r\n\r\n        this.sucursalService.search(this.context.app.defaultSite.identity, request)\r\n            .then(response => {\r\n                this.context.app.hideSpinner();\r\n                //\r\n                this.sucursales = response.rows;\r\n                this.pageIndex = request.pageIndex;\r\n            })\r\n            .catch(error => this.handleError(error));\r\n    }\r\n\r\n    onAddingItem() {\r\n        this.router.navigate(['kernel/security/sucursales', this.idEmpresa, 0]);\r\n    }\r\n\r\n    onEditingItem(item: CatalogItem) {\r\n        this.router.navigate(['kernel/security/sucursales', this.idEmpresa, item.id]);\r\n    }\r\n\r\n}\r\n"]}
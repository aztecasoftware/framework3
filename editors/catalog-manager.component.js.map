{"version":3,"sources":["kernel/editors/catalog-manager.component.ts"],"names":[],"mappings":"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","file":"catalog-manager.component.js","sourcesContent":["import { Component, EventEmitter, Input, Output, OnInit, ContentChildren, ViewChild, QueryList, forwardRef, ChangeDetectionStrategy } from '@angular/core';\r\n//\r\nimport { ModalDirective } from 'ng2-bootstrap/ng2-bootstrap'\r\nimport { Menu } from 'wijmo/wijmo.input';\r\n//\r\nimport { Context } from '../context';\r\nimport { CatalogItem, CatalogService, CatalogInfo } from '../entities';\r\nimport { CatalogOptions } from '../custom/custom-catalog';\r\nimport { SearchRequest, SortOrder } from '../search/search-request';\r\nimport { GridColumn } from '../utils/grid-column';\r\nimport { MenuItem } from '../utils/menu-item';\r\nimport { Alert } from '../utils/alert';\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'azteca-catalog-manager',\r\n    templateUrl: './catalog-manager.component.html',\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CatalogManagerComponent {\r\n    menuItems: MenuItem[] = [];\r\n    currentItem: CatalogItem = null;\r\n    alerts: Alert[] = [];\r\n    classMap: string[] = [];\r\n    defaultOptions: CatalogOptions = {busquedasServidor: true, tamanioPagina: 10};\r\n    //\r\n    @ContentChildren(GridColumn) columns: QueryList<GridColumn>;    \r\n    @ViewChild('confirmDelDialog') deleteDialog: ModalDirective;\r\n    //\r\n    @Input() pageSize: number = 10;\r\n    @Input() pageIndex: number;    \r\n    @Input() totalRows: number;\r\n    @Input() standAlone: boolean = true;\r\n    @Input() catalogList: CatalogItem[]=[];\r\n    @Input() serverSide: boolean = true;\r\n    @Input() customOptions: MenuItem[] = [];\r\n\r\n    @Input() enabled: boolean = true;\r\n    @Input() allowNew: boolean = true;\r\n    \r\n    @Input()\r\n    get allowView(): boolean {\r\n        return this.isMenuItemEnabled(\"OPEN\");\r\n    }\r\n    set allowView(value: boolean) {\r\n        this.setMenuItemState(\"OPEN\", value);\r\n    }\r\n\r\n    @Input()\r\n    get allowEdit(): boolean {\r\n        return this.isMenuItemEnabled(\"EDIT\");\r\n    }\r\n    set allowEdit(value: boolean) {\r\n        this.setMenuItemState(\"EDIT\", value);\r\n    }\r\n\r\n    @Input()\r\n    get allowDelete(): boolean {\r\n        return this.isMenuItemEnabled(\"DELETE\");\r\n    }\r\n    set allowDelete(value: boolean) {\r\n        this.setMenuItemState(\"DELETE\", value);\r\n    }\r\n\r\n    @Input()\r\n    get allowClone(): boolean {\r\n        return this.isMenuItemEnabled(\"CLONE\");\r\n    }\r\n    set allowClone(value: boolean) {\r\n        this.setMenuItemState(\"CLONE\", value);\r\n    }\r\n\r\n    @Input()\r\n    get allowChangeState(): boolean {\r\n        return this.isMenuItemEnabled(\"STATE\");\r\n    }\r\n    set allowChangeState(value: boolean) {\r\n        this.setMenuItemState(\"STATE\", value);\r\n    }\r\n     \r\n    //\r\n    @Output() configureCatalog: EventEmitter<CatalogOptions> = new EventEmitter<CatalogOptions>();\r\n    @Output() searchRequested: EventEmitter<SearchRequest> = new EventEmitter<SearchRequest>();\r\n    @Output() currentItemChanged: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() addingItem: EventEmitter<void> = new EventEmitter<void>();\r\n    @Output() viewingItem: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() editingItem: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() deletingItem: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() cloningItem: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() changingItemState: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n    @Output() itemAction: EventEmitter<CatalogItem> = new EventEmitter<CatalogItem>();\r\n        \r\n    constructor(protected context: Context, private catalogService: CatalogService<CatalogInfo>) {\r\n        \r\n    }\r\n\r\n    ngOnInit() {        \r\n        this.createMenu();\r\n        //\r\n        if (this.standAlone) {                        \r\n            this.classMap.push(this.context.app.defaultWidth);\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        setTimeout(_ => this.loadConfiguration());        \r\n    }\r\n\r\n    loadConfiguration() {\r\n        //Cargar configuración del catálogo\r\n        this.context.app.showSpinner();\r\n        this.catalogService.getOptions()\r\n            .then(options => {\r\n                if (options != null)\r\n                    this.configureCatalog.next(options);\r\n                else {\r\n                    this.configureCatalog.next(this.defaultOptions);\r\n                }\r\n                this.context.app.hideSpinner();\r\n            })\r\n            .catch(error => this.handleError(error));            \r\n    }\r\n\r\n    triggerSearch() {\r\n        //Disparar búsqueda inicial. Si el manejo se realiza del lado del servidor, obtener sólo la primer página, si es local obtener toda la información disponible\r\n        let request: SearchRequest = new SearchRequest();\r\n        request.pageIndex = 0;\r\n        request.pageSize = this.pageSize;\r\n        request.paged = this.serverSide ? true : false;\r\n        //\r\n        this.searchRequested.next(request);\r\n    }\r\n\r\n    showAlert(message: string, type: string) {\r\n        let newAlert: Alert = { msg: message, type: type, dismissOnTimeout: 5000, closable: true };\r\n        this.alerts.push(newAlert);\r\n    }\r\n\r\n    public closeAlert(i: number): void {\r\n        this.alerts.splice(i, 1);\r\n    }\r\n\r\n    searchRequestedHandler(request: SearchRequest) {\r\n        //Redireccionar request a componente padre\r\n        this.searchRequested.next(request);\r\n    }\r\n\r\n    private isMenuItemEnabled(tag: string): boolean {\r\n        let item = this.getMenuItem(tag);\r\n        if (item != null)\r\n            return item.enabled;\r\n        else\r\n            return false;\r\n    }\r\n\r\n    private setMenuItemState(tag: string, enabled: boolean) {\r\n        let item = this.getMenuItem(tag);\r\n        if (item != null)\r\n            item.enabled = enabled;\r\n    }\r\n\r\n    getMenuItem(tag: string): MenuItem {\r\n        let retItem: MenuItem = null;\r\n        this.menuItems.forEach(item => {\r\n            if (item.tag == tag) {\r\n                retItem = item;\r\n            }\r\n        });\r\n        return retItem;\r\n    }\r\n\r\n    createMenu() {\r\n        //Agregar opciones estándar del catálogo\r\n        let mnuView: MenuItem = { icon: \"glyphicon glyphicon-folder-open\", text: \"Ver\", tag: \"OPEN\", smallText:\"abrir en modo de sólo lectura\" };\r\n        let mnuEdit: MenuItem = { icon: \"glyphicon glyphicon-pencil\", text: \"Editar\", tag: \"EDIT\", smallText: \"abrir en modo de edición\" };\r\n        let mnuState: MenuItem = { icon: \"glyphicon glyphicon-lock\", text: \"Activar/Desactivar\", tag: \"STATE\", smallText: \"cambiar estatus\" };\r\n\r\n        let mnuCopy: MenuItem = { icon: \"glyphicon glyphicon-duplicate\", text: \"Duplicar\", tag: \"CLONE\", smallText: \"crear una copia\" };\r\n        let mnuDelete: MenuItem = { icon: \"glyphicon glyphicon-trash\", text: \"Eliminar\", tag: \"DELETE\", smallText: \"eliminar permanentemente\" };\r\n\r\n        let mnuAudit: MenuItem = { icon: \"glyphicon glyphicon-search\", text: \"Auditar\", tag: \"AUDIT\", smallText: \"auditar cambios\" };\r\n\r\n        this.menuItems.push(mnuView, mnuEdit, mnuState, mnuCopy, mnuDelete, mnuAudit)\r\n        //Agregar elementos personalizados\r\n        this.menuItems = this.menuItems.concat(this.customOptions);\r\n        //\r\n        this.menuItems.forEach(item => {\r\n            if (item.enabled == undefined) item.enabled = true;\r\n        });\r\n    }\r\n\r\n    onValidateMenu(item: CatalogItem) {\r\n        if (item) {\r\n            //Cambiar texto de opción para activar o desactivar registros\r\n            let mnuState: MenuItem = this.menuItems.filter(item => item.tag == \"STATE\")[0];\r\n            if (item.activo) {\r\n                mnuState.text = \"Desactivar\";\r\n            }\r\n            else {\r\n                mnuState.text = \"Activar\";\r\n            }\r\n        }\r\n    }\r\n\r\n    currentItemChangedHandler(item: CatalogItem) {\r\n        this.currentItem = item;\r\n        this.currentItemChanged.next(item);\r\n    }\r\n\r\n    menuItemClicked(menu: Menu, args: any) {\r\n        let item: MenuItem = this.menuItems[menu.selectedIndex];        \r\n        this.optionClick(item);\r\n    }\r\n\r\n    onIsDroppedDown(menu: Menu, args: any) {        \r\n        this.onValidateMenu(this.currentItem);        \r\n    }\r\n\r\n    deleteItem() {\r\n        this.deletingItem.next(this.currentItem);\r\n        this.deleteDialog.hide();\r\n    }\r\n\r\n    hideDeleteDialog() {\r\n        this.deleteDialog.hide();\r\n    }\r\n\r\n    optionClick(option: MenuItem) {\r\n        if (option.tag == \"OPEN\")\r\n            this.viewingItem.next(this.currentItem);\r\n        if (option.tag == \"EDIT\")\r\n            this.editingItem.next(this.currentItem);\r\n        if (option.tag == \"DELETE\") {\r\n            this.deleteDialog.config.backdrop = false;\r\n            this.deleteDialog.show();\r\n        } \r\n        if (option.tag == \"CLONE\")\r\n            this.cloningItem.next(this.currentItem);\r\n        if (option.tag == \"STATE\")\r\n            this.changingItemState.next(this.currentItem);\r\n    }\r\n\r\n    newItemHandler() {\r\n        this.addingItem.next();\r\n    }\r\n\r\n    private handleError(error: any) {\r\n        this.context.app.hideSpinner();\r\n    }\r\n\r\n}\r\n"]}